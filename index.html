<!doctype html>
<html>
	<head>
		<title>Extreme Fall!</title>
		<link rel="shortcut icon" type="image/x-icon" href="assets/favicon.ico">
		<meta property="og:image" content="http://web.ist.utl.pt/~francisco.baio.dias/games/extremefall/assets/logo.png"/>
		<script src="processing-1.4.1.min.js"></script>
		<link rel="stylesheet" href="styles.css" type="text/css" media="screen">
		<style>
			* {margin: 0;padding: 0;line-height: 0;outline: none;}
			html, body {height:100%; width:100%; overflow:hidden; background-color:#9DDDD8}
			canvas {position:fixed; top:0;left:0;}
		</style>
		<script type="application/javascript">
			var printMessage = function (msg) {
				document.getElementById('msg').innerHTML = msg;
			};
		</script>
		<script type="application/javascript">
			(function (limit_canvas_size, stretch_to_fit) {

			var canvas = document.getElementById('gameCanvas');
			var game_area = document.getElementById('gameArea');

			// try with different resolutions !
			canvas.width = 1366;
			canvas.height = 768;

			var aspect_ratio = canvas.width / canvas.height;

			var context = canvas.getContext('2d');

			function draw() {
				context.save();
				context.fillRect(0, 0, canvas.width, canvas.height);
				context.fillStyle = "red";
				context.fillRect(canvas.width / 4, canvas.height / 4, canvas.width / 2, canvas.height / 2);
				context.restore();
			}

			function resize() {
				// start with canvas original aspect ratio
				var widthToHeight = aspect_ratio;
				var newWidthToHeight = aspect_ratio;

				// cache the window dimensions
				var newWidth = window.innerWidth,
					newHeight = window.innerHeight;

				if (limit_canvas_size) {
					// fit smaller screen entirely but maintain the resolution on bigger screens
					newWidth = newWidth <= canvas.width ? newWidth : canvas.width;
					newHeight = newHeight <= canvas.height ? newHeight : canvas.height;
					// this will be the visual aspect ratio
					newWidthToHeight = newWidth / newHeight;
				}

				if (stretch_to_fit) {
					// overwrite the current canvas aspect ratio to fit the entire screen
					widthToHeight = window.innerWidth / window.innerHeight;
				}

				// special case (only fit the screen if window is smaller than resolution)
				if (stretch_to_fit && limit_canvas_size) {
					newWidth = canvas.width;
					newHeight = canvas.height;
					newWidth = window.innerWidth <= newWidth ? window.innerWidth : newWidth;
					newHeight = window.innerHeight <= newHeight ? window.innerHeight : newHeight;
					// this will be the visual aspect ratio
					widthToHeight = newWidth / newHeight;
				}
				else {        
					// this will be the visual aspect ratio 
					newWidthToHeight = newWidth / newHeight;
				}

				// scale the game area using CSS        
				if (newWidthToHeight > widthToHeight) {
					newWidth = newHeight * widthToHeight;
					game_area.style.height = newHeight + 'px';
					game_area.style.width = newWidth + 'px';
				} else {
					newHeight = newWidth / widthToHeight;
					game_area.style.width = newWidth + 'px';
					game_area.style.height = newHeight + 'px';
				}

				// adjust the game area position
				game_area.style.marginTop = (-newHeight / 2) + 'px';
				game_area.style.marginLeft = (-newWidth / 2) + 'px';

			};

			// listen to resize events
			window.addEventListener('resize', function () {
				resize();        
			}, false);

			// also resize the screen on orientation changes
			window.addEventListener('orientationchange', function () {
				resize();        
			}, false);

			// draw something in the canvas
			// note that you dont need to redraw on resize since the canvas element stays intact    
			draw();

			// first resize
			resize();

			})(false, false); // setup 3
		</script>
	</head>
	<body scroll="no" style="overflow: hidden">
		<div id="gameArea">
			<canvas id="gameCanvas"  data-processing-sources="src/player.pde src/stupidGuy.pde src/gameObject.pde src/overlay.pde extremefall.pde"></canvas>
		</div>
		<div id="msg" class="scores"></div>
	</body>
	
</html>